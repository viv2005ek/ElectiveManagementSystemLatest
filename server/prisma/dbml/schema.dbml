//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table Credential {
  id String [pk]
  email String [unique, not null]
  passwordHash String [not null]
  role UserRole [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  student Student
  professor Professor
  admin Admin
}

Table Admin {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  registrationNumber String [unique, not null]
  email String [unique, not null]
  firstName String [not null]
  middleName String
  lastName String
  credentialId String [unique, not null]
  credential Credential [not null]
  isDeleted Boolean [not null, default: false]
}

Table Faculty {
  id String [pk]
  name String [unique, not null]
  schools School [not null]
  Subject Subject [not null]
}

Table School {
  id String [pk]
  name String [unique, not null]
  facultyId String [not null]
  faculty Faculty [not null]
  departments Department [not null]
  Subject Subject [not null]
}

Table Department {
  id String [pk]
  name String [unique, not null]
  schoolId String [not null]
  school School [not null]
  professors Professor [not null]
  courses Course [not null]
  courseBuckets CourseBucket [not null]
  programs Program [not null]
  Subject Subject [not null]
}

Table Program {
  id String [pk]
  name String [unique, not null]
  departmentId String [not null]
  department Department [not null]
  programType ProgramType [not null]
  students Student [not null]
  subjects Subject [not null]
  semesters Semester [not null]
}

Table Student {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  registrationNumber String [unique, not null]
  programId String [not null]
  program Program [not null]
  email String [unique, not null]
  firstName String [not null]
  middleName String
  lastName String
  gender Gender [not null]
  semester Int [not null]
  batchId String [not null]
  batch Batch [not null]
  contactNumber String [unique, not null]
  credentialId String [unique, not null]
  credential Credential [not null]
  isDeleted Boolean [not null, default: false]
  standaloneSubjectPreferences StandaloneSubjectPreference [not null]
  bucketSubjectPreferences BucketSubjectPreference [not null]
  standaloneAllotments StandaloneAllotment [not null]
  bucketAllotments BucketAllotment [not null]
}

Table Professor {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  professorRankId String [not null]
  professorRank ProfessorRank [not null]
  registrationNumber String [unique, not null]
  departmentId String [not null]
  department Department [not null]
  email String [unique, not null]
  firstName String [not null]
  middleName String
  lastName String
  credentialId String [unique, not null]
  credential Credential [not null]
  isDeleted Boolean [not null, default: false]
}

Table Course {
  id String [pk]
  code String [not null]
  name String [not null]
  credits Int [not null]
  departmentId String [not null]
  department Department [not null]
  courseBucketCourses CourseBucketCourse [not null]
  isDeleted Boolean [not null, default: false]
  subjectTypes SubjectType [not null]
  standaloneSubjectPreferences StandaloneSubjectPreference [not null]
  standaloneAllotments StandaloneAllotment [not null]
  bucketAllotments BucketAllotment [not null]
  coursesWithSeats SubjectCourseWithSeats [not null]

  indexes {
    (code, departmentId) [unique]
  }
}

Table CourseBucket {
  id String [pk]
  name String [not null]
  departmentId String [not null]
  totalCredits Int [not null]
  numberOfCourses Int [not null]
  department Department [not null]
  courseBucketCourses CourseBucketCourse [not null]
  subjectTypes SubjectType [not null]
  isDeleted Boolean [not null, default: false]
  bucketSubjectPreferences BucketSubjectPreference [not null]
  bucketAllotments BucketAllotment [not null]
  courseBucketsWithSeats SubjectCourseBucketWithSeats [not null]

  indexes {
    (name, departmentId) [unique]
  }
}

Table CourseBucketCourse {
  id String [pk]
  courseBucketId String [not null]
  courseBucket CourseBucket [not null]
  courseId String [not null]
  course Course [not null]
  orderIndex Int [not null]

  indexes {
    (courseBucketId, courseId) [unique]
    (courseBucketId, orderIndex) [unique]
  }
}

Table SubjectType {
  id String [pk]
  name String [unique, not null]
  description String
  allotmentType AllotmentType [not null]
  scope SubjectScope [not null]
  subjects Subject [not null]
  courses Course [not null]
  courseBuckets CourseBucket [not null]
}

Table Subject {
  id String [pk]
  name String [not null]
  semester Semester
  semesterId String
  batchId String [not null]
  batch Batch [not null]
  departmentId String
  department Department
  schoolId String
  school School
  facultyId String
  faculty Faculty
  subjectTypeId String [not null]
  subjectType SubjectType [not null]
  isPreferenceWindowOpen Boolean [not null, default: false]
  dueDate DateTime
  isAllotmentFinalized Boolean [not null, default: false]
  semesters Semester [not null]
  programs Program [not null]
  standaloneSubjectPreferences StandaloneSubjectPreference [not null]
  bucketSubjectPreferences BucketSubjectPreference [not null]
  standaloneAllotments StandaloneAllotment [not null]
  bucketAllotments BucketAllotment [not null]
  coursesWithSeats SubjectCourseWithSeats [not null]
  courseBucketsWithSeats SubjectCourseBucketWithSeats [not null]
}

Table SubjectCourseWithSeats {
  id String [pk]
  courseId String [not null]
  course Course [not null]
  subjectId String [not null]
  subject Subject [not null]
  totalSeats Int [not null]
  availableSeats Int [not null]

  indexes {
    (courseId, subjectId) [unique]
  }
}

Table SubjectCourseBucketWithSeats {
  id String [pk]
  courseBucketId String [not null]
  courseBucket CourseBucket [not null]
  subjectId String [not null]
  subject Subject [not null]
  totalSeats Int [not null]
  availableSeats Int [not null]

  indexes {
    (courseBucketId, subjectId) [unique]
  }
}

Table StandaloneSubjectPreference {
  id String [pk]
  subjectId String [not null]
  subject Subject [not null]
  studentId String [not null]
  student Student [not null]
  courseId String [not null]
  course Course [not null]
  preferenceRank Int [not null]
  changeRequested Boolean [not null, default: false]
  runAllotment Boolean [not null, default: true]
  updatedAt DateTime [not null]
  createdAt DateTime [default: `now()`, not null]

  indexes {
    (subjectId, studentId, preferenceRank) [unique]
    (subjectId, studentId, courseId) [unique]
  }
}

Table BucketSubjectPreference {
  id String [pk]
  subjectId String [not null]
  subject Subject [not null]
  studentId String [not null]
  student Student [not null]
  courseBucketId String [not null]
  courseBucket CourseBucket [not null]
  preferenceRank Int [not null]
  runAllotment Boolean [not null, default: true]
  changeRequested Boolean [not null, default: false]
  updatedAt DateTime [not null]
  createdAt DateTime [default: `now()`, not null]

  indexes {
    (subjectId, studentId, preferenceRank) [unique]
    (subjectId, studentId, courseBucketId) [unique]
  }
}

Table StandaloneAllotment {
  id String [pk]
  subjectId String [not null]
  subject Subject [not null]
  studentId String [not null]
  student Student [not null]
  courseId String [not null]
  course Course [not null]
  semesterId String [not null]
  semester Semester [not null]
  allotmentStatus AllotmentStatus [not null]
}

Table BucketAllotment {
  id String [pk]
  studentId String [not null]
  student Student [not null]
  subjectId String [not null]
  subject Subject [not null]
  courseBucketId String [not null]
  courseBucket CourseBucket [not null]
  courseId String [not null]
  course Course [not null]
  semesterId String [not null]
  semester Semester [not null]
  allotmentStatus AllotmentStatus [not null]
}

Table Batch {
  id String [pk]
  year Int [unique, not null]
  students Student [not null]
  subjects Subject [not null]
}

Table Semester {
  id String [pk]
  number Int [unique, not null]
  subjects Subject [not null]
  standaloneAllotments StandaloneAllotment [not null]
  bucketAllotments BucketAllotment [not null]
  subject Subject [not null]
  programs Program [not null]
}

Table ProfessorRank {
  id String [pk]
  name String [unique, not null]
  priority Int [unique, not null]
  professors Professor [not null]
}

Table programToSubject {
  subjectsId String [ref: > Subject.id]
  programsId String [ref: > Program.id]
}

Table programToSemesters {
  semestersId String [ref: > Semester.id]
  programsId String [ref: > Program.id]
}

Table courseToSubjectCategory {
  subjecttypesId String [ref: > SubjectType.id]
  coursesId String [ref: > Course.id]
}

Table courseBucketToSubjectTypes {
  subjecttypesId String [ref: > SubjectType.id]
  coursebucketsId String [ref: > CourseBucket.id]
}

Table subjectSemesters {
  semestersId String [ref: > Semester.id]
  subjectsId String [ref: > Subject.id]
}

Enum Gender {
  Male
  Female
  Other
}

Enum ProgramType {
  Undergraduate
  Postgraduate
  PhD
}

Enum UserRole {
  Student
  Professor
  Admin
}

Enum AllotmentType {
  Standalone
  Bucket
}

Enum AllotmentStatus {
  Pending
  Confirmed
}

Enum SubjectScope {
  AnyDepartment
  SameFaculty
  SameSchool
  SameDepartment
}

Ref: Admin.credentialId - Credential.id

Ref: School.facultyId > Faculty.id

Ref: Department.schoolId > School.id

Ref: Program.departmentId > Department.id

Ref: Student.programId > Program.id

Ref: Student.batchId > Batch.id

Ref: Student.credentialId - Credential.id

Ref: Professor.professorRankId > ProfessorRank.id

Ref: Professor.departmentId > Department.id

Ref: Professor.credentialId - Credential.id

Ref: Course.departmentId > Department.id

Ref: CourseBucket.departmentId > Department.id

Ref: CourseBucketCourse.courseBucketId > CourseBucket.id

Ref: CourseBucketCourse.courseId > Course.id

Ref: Subject.semesterId > Semester.id

Ref: Subject.batchId > Batch.id

Ref: Subject.departmentId > Department.id

Ref: Subject.schoolId > School.id

Ref: Subject.facultyId > Faculty.id

Ref: Subject.subjectTypeId > SubjectType.id

Ref: SubjectCourseWithSeats.courseId > Course.id

Ref: SubjectCourseWithSeats.subjectId > Subject.id

Ref: SubjectCourseBucketWithSeats.courseBucketId > CourseBucket.id

Ref: SubjectCourseBucketWithSeats.subjectId > Subject.id

Ref: StandaloneSubjectPreference.subjectId > Subject.id

Ref: StandaloneSubjectPreference.studentId > Student.id

Ref: StandaloneSubjectPreference.courseId > Course.id

Ref: BucketSubjectPreference.subjectId > Subject.id

Ref: BucketSubjectPreference.studentId > Student.id

Ref: BucketSubjectPreference.courseBucketId > CourseBucket.id

Ref: StandaloneAllotment.subjectId > Subject.id

Ref: StandaloneAllotment.studentId > Student.id

Ref: StandaloneAllotment.courseId > Course.id

Ref: StandaloneAllotment.semesterId > Semester.id

Ref: BucketAllotment.studentId > Student.id

Ref: BucketAllotment.subjectId > Subject.id

Ref: BucketAllotment.courseBucketId > CourseBucket.id

Ref: BucketAllotment.courseId > Course.id

Ref: BucketAllotment.semesterId > Semester.id